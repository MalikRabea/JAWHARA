<div class="space-y-6">
  <!-- Payment Methods -->
  <div>
    <h3 class="text-lg font-medium text-gray-900 mb-4">Choose Payment Method</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div 
        *ngFor="let method of paymentMethods" 
        class="relative"
      >
        <input
          type="radio"
          [id]="method.id"
          [value]="method.id"
          [(ngModel)]="selectedPaymentMethod"
          (change)="onPaymentMethodChange(method.id)"
          class="sr-only"
        >
        <label 
          [for]="method.id"
          class="flex items-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200"
          [class]="selectedPaymentMethod === method.id ? 'border-blue-500 bg-blue-50' : 'border-gray-200 hover:border-gray-300'"
        >
          <i [class]="method.icon" class="text-xl mr-3"></i>
          <span class="font-medium">{{ method.name }}</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Card Payment Form -->
  <div *ngIf="selectedPaymentMethod === 'card'" class="space-y-6">
    <h3 class="text-lg font-medium text-gray-900">Card Details</h3>
    
    <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()" class="space-y-4">
      <!-- Card Number -->
      <div>
        <label for="cardNumber" class="block text-sm font-medium text-gray-700 mb-2">
          Card Number *
        </label>
        <input
          type="text"
          id="cardNumber"
          formControlName="cardNumber"
          (input)="formatCardNumber($event)"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
          placeholder="1234 5678 9012 3456"
          maxlength="19"
        >
        <p *ngIf="getFieldError('cardNumber')" class="text-red-500 text-sm mt-1">
          {{ getFieldError('cardNumber') }}
        </p>
      </div>

      <!-- Cardholder Name -->
      <div>
        <label for="cardholderName" class="block text-sm font-medium text-gray-700 mb-2">
          Cardholder Name *
        </label>
        <input
          type="text"
          id="cardholderName"
          formControlName="cardholderName"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
          placeholder="Enter cardholder name"
        >
        <p *ngIf="getFieldError('cardholderName')" class="text-red-500 text-sm mt-1">
          {{ getFieldError('cardholderName') }}
        </p>
      </div>

      <!-- Expiry Date and CVV -->
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="expiryDate" class="block text-sm font-medium text-gray-700 mb-2">
            Expiry Date *
          </label>
          <input
            type="text"
            id="expiryDate"
            formControlName="expiryDate"
            (input)="formatExpiryDate($event)"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
            placeholder="MM/YY"
            maxlength="5"
          >
          <p *ngIf="getFieldError('expiryDate')" class="text-red-500 text-sm mt-1">
            {{ getFieldError('expiryDate') }}
          </p>
        </div>

        <div>
          <label for="cvv" class="block text-sm font-medium text-gray-700 mb-2">
            CVV *
          </label>
          <input
            type="text"
            id="cvv"
            formControlName="cvv"
            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
            placeholder="123"
            maxlength="4"
          >
          <p *ngIf="getFieldError('cvv')" class="text-red-500 text-sm mt-1">
            {{ getFieldError('cvv') }}
          </p>
        </div>
      </div>

      <!-- Billing Address -->
      <div>
        <label for="billingAddress" class="block text-sm font-medium text-gray-700 mb-2">
          Billing Address *
        </label>
        <textarea
          id="billingAddress"
          formControlName="billingAddress"
          rows="3"
          class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
          placeholder="Enter your billing address"
        ></textarea>
        <p *ngIf="getFieldError('billingAddress')" class="text-red-500 text-sm mt-1">
          {{ getFieldError('billingAddress') }}
        </p>
      </div>
    </form>
  </div>

  <!-- Alternative Payment Methods -->
  <div *ngIf="selectedPaymentMethod !== 'card'" class="space-y-4">
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
      <div class="flex items-center">
        <i class="hs-icon hs-icon-info-circle text-blue-600 mr-2"></i>
        <div>
          <h4 class="font-medium text-blue-900">Payment Instructions</h4>
          <p class="text-sm text-blue-700 mt-1">
            <span *ngIf="selectedPaymentMethod === 'paypal'">
              You will be redirected to PayPal to complete your payment.
            </span>
            <span *ngIf="selectedPaymentMethod === 'cod'">
              Payment will be collected when your order is delivered.
            </span>
            <span *ngIf="selectedPaymentMethod === 'bank'">
              You will receive bank transfer details after order confirmation.
            </span>
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Summary -->
  <div class="bg-gray-50 rounded-lg p-4">
    <h4 class="font-medium text-gray-900 mb-3">Order Total</h4>
    <div class="space-y-2 text-sm">
      <div class="flex justify-between">
        <span class="text-gray-600">Subtotal</span>
        <span>${{ checkoutSummary.subtotal.toFixed(2) }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-600">Shipping</span>
        <span>${{ checkoutSummary.shipping.toFixed(2) }}</span>
      </div>
      <div class="flex justify-between">
        <span class="text-gray-600">Tax</span>
        <span>${{ checkoutSummary.tax.toFixed(2) }}</span>
      </div>
      <div *ngIf="checkoutSummary.discount > 0" class="flex justify-between text-green-600">
        <span>Discount</span>
        <span>-${{ checkoutSummary.discount.toFixed(2) }}</span>
      </div>
      <div class="flex justify-between font-semibold text-base border-t border-gray-200 pt-2">
        <span>Total</span>
        <span>${{ checkoutSummary.total.toFixed(2) }}</span>
      </div>
    </div>
  </div>

  <!-- Submit Button -->
  <div class="flex justify-end pt-6 border-t border-gray-200">
    <button
      type="button"
      (click)="onSubmit()"
      [disabled]="isSubmitting"
      class="px-8 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center"
    >
      <span *ngIf="isSubmitting" class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></span>
      {{ isSubmitting ? 'Processing Payment...' : 'Complete Order' }}
    </button>
  </div>
</div>