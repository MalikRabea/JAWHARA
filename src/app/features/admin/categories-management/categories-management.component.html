<!-- Categories Management with Amazing Tailwind UI -->
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 p-6">
  <div class="w-full mx-auto space-y-8">

    <!-- Header Section -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8 animate-fade-in">
      <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
        <div class="space-y-2">
          <h1
            class="text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent">
            <i class="fas fa-tags text-purple-500 mr-3 animate-bounce"></i>
            Categories Management
          </h1>
          <p class="text-gray-600 text-lg">Manage your product categories with ease and style</p>
        </div>

        <div class="flex flex-col sm:flex-row gap-4">
          <button
            class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 hover:scale-105"
            (click)="openCategoryForm()" [disabled]="loading">
            <i class="fas fa-plus mr-2"></i>
            {{showCategoryForm ? 'Close Category Form' : 'Add New Category'}}
          </button>
        </div>
      </div>
    </div>

    <!-- Search Section -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 animate-slide-down">
      <div class="max-w-md mx-auto">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <i class="fas fa-search text-gray-400"></i>
          </div>
          <input type="text"
            class="block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white/90 backdrop-blur-sm"
            placeholder="Search categories..." [(ngModel)]="searchTerm" (keyup.enter)="onSearch()" [disabled]="loading">
          <button class="absolute inset-y-0 right-0 pr-3 flex items-center" (click)="onSearch()" [disabled]="loading">
            <i class="fas fa-search text-blue-500 hover:text-blue-700 transition-colors"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Category Form Section (Show/Hide with smooth transitions) -->
    <div class="transition-all duration-500 ease-in-out transform" [class.opacity-100]="showCategoryForm"
      [class.max-h-screen]="showCategoryForm" [class.opacity-0]="!showCategoryForm" [class.max-h-0]="!showCategoryForm"
      [class.overflow-hidden]="!showCategoryForm">

      <div class="bg-white/90 backdrop-blur-md rounded-2xl shadow-2xl border border-white/30 p-8 animate-slide-down">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-2xl font-bold text-gray-800 flex items-center">
            <i class="fas fa-edit text-purple-500 mr-3"></i>
            {{ isEditingCategory ? 'Edit Category' : 'Create New Category' }}
          </h3>
          <button class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-300"
            (click)="closeCategoryForm()">
            <i class="fas fa-times text-xl"></i>
          </button>
        </div>

        <form [formGroup]="categoryForm" (ngSubmit)="saveCategory()" class="space-y-6">
          <div class="space-y-2">
            <label class="block text-sm font-semibold text-gray-700 flex items-center">
              <i class="fas fa-tag text-blue-500 mr-2"></i>
              Category Name
            </label>
            <input type="text"
              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white/90"
              formControlName="name" placeholder="Enter category name"
              [class.border-red-500]="categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched"
              [class.border-green-500]="categoryForm.get('name')?.valid && categoryForm.get('name')?.touched">
            <div class="text-red-500 text-sm flex items-center mt-1"
              *ngIf="categoryForm.get('name')?.invalid && categoryForm.get('name')?.touched">
              <i class="fas fa-exclamation-circle mr-1"></i>
              Category name is required and must be at least 2 characters
            </div>
          </div>

          <div class="space-y-2">
            <label class="block text-sm font-semibold text-gray-700 flex items-center">
              <i class="fas fa-align-left text-blue-500 mr-2"></i>
              Description
            </label>
            <textarea
              class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-300 bg-white/90 resize-none"
              formControlName="description" placeholder="Enter category description (optional)" rows="3"></textarea>
          </div>

          <div class="flex flex-col sm:flex-row gap-4 pt-4">
            <button type="button"
              class="flex-1 px-6 py-3 bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105"
              (click)="closeCategoryForm()">
              <i class="fas fa-times mr-2"></i>
              Cancel
            </button>
            <button type="submit"
              class="flex-1 px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-semibold rounded-xl transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"
              [disabled]="categoryForm.invalid || loading">
              <i class="fas fa-save mr-2" *ngIf="!loading"></i>
              <i class="fas fa-spinner fa-spin mr-2" *ngIf="loading"></i>
              {{ isEditingCategory ? 'Update Category' : 'Create Category' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Categories List Section -->
    <div class="space-y-6">
      <!-- Loading State -->
      <div class="text-center py-12" *ngIf="loading">
        <div
          class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mb-4">
          <i class="fas fa-spinner fa-spin text-white text-2xl"></i>
        </div>
        <p class="text-gray-600 text-lg font-medium">Loading categories...</p>
      </div>

      <!-- Categories Table -->
      <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 overflow-hidden"
        *ngIf="!loading && categories.length > 0">

        <!-- Table Header -->
        <div class="bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4">
          <h3 class="text-white text-lg font-semibold flex items-center">
            <i class="fas fa-table mr-2"></i>
            Categories Overview
          </h3>
        </div>

        <!-- Table Content -->
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead class="bg-gray-50 border-b border-gray-200">
              <tr>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-hashtag mr-1"></i>
                  ID
                </th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-tag mr-1"></i>
                  Name
                </th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-align-left mr-1"></i>
                  Description
                </th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-calendar-plus mr-1"></i>
                  Created
                </th>
                <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-calendar-edit mr-1"></i>
                  Updated
                </th>
                <th class="px-6 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <i class="fas fa-cogs mr-1"></i>
                  Actions
                </th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
              <tr class="hover:bg-gray-50 transition-colors duration-200 group"
                *ngFor="let category of categories; trackBy: trackByCategoryId">

                <!-- ID Column -->
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div
                      class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center text-white text-sm font-bold">
                      {{ category.id }}
                    </div>
                  </div>
                </td>

                <!-- Name Column -->
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="flex items-center">
                    <div
                      class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white mr-3">
                      <i class="fas fa-tag"></i>
                    </div>
                    <div>
                      <div
                        class="text-sm font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-200">
                        {{ category.name }}
                      </div>
                    </div>
                  </div>
                </td>

                <!-- Description Column -->
                <td class="px-6 py-4">
                  <div class="text-sm text-gray-600 max-w-xs">
                    <p *ngIf="category.description" class="truncate">
                      {{ category.description }}
                    </p>
                    <p *ngIf="!category.description" class="text-gray-400 italic flex items-center">
                      <i class="fas fa-info-circle mr-1"></i>
                      No description
                    </p>
                  </div>
                </td>

                <!-- Created At Column -->
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-600" *ngIf="category.createdAt">
                    <div class="flex items-center">
                      <i class="fas fa-calendar-plus text-gray-400 mr-2"></i>
                      {{ category.createdAt | date:'short' }}
                    </div>
                  </div>
                  <div class="text-sm text-gray-400 italic" *ngIf="!category.createdAt">
                    N/A
                  </div>
                </td>

                <!-- Updated At Column -->
                <td class="px-6 py-4 whitespace-nowrap">
                  <div class="text-sm text-gray-600" *ngIf="category.updatedAt">
                    <div class="flex items-center">
                      <i class="fas fa-calendar-edit text-gray-400 mr-2"></i>
                      {{ category.updatedAt | date:'short' }}
                    </div>
                  </div>
                  <div class="text-sm text-gray-400 italic" *ngIf="!category.updatedAt">
                    N/A
                  </div>
                </td>

                <!-- Actions Column -->
                <td class="px-6 py-4 whitespace-nowrap text-center">
                  <div class="flex items-center justify-center space-x-2">
                    <button
                      class="inline-flex items-center px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-xs font-semibold rounded-lg transition-all duration-300 hover:scale-105"
                      (click)="openCategoryForm(category)" title="Edit category">
                      <i class="fas fa-edit mr-1"></i>
                      Edit
                    </button>
                    <button
                      class="inline-flex items-center px-3 py-2 bg-red-500 hover:bg-red-600 text-white text-xs font-semibold rounded-lg transition-all duration-300 hover:scale-105"
                      (click)="deleteCategory(category)" title="Delete category">
                      <i class="fas fa-trash mr-1"></i>
                      Delete
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Table Footer -->
        <div class="bg-gray-50 px-6 py-3 border-t border-gray-200">
          <div class="flex items-center justify-between">
            <div class="text-sm text-gray-600">
              <span class="font-medium">{{ categories.length }}</span> categories found
            </div>
            <div class="text-sm text-gray-500">
              <i class="fas fa-info-circle mr-1"></i>
              Click edit or delete to manage categories
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div class="text-center py-16" *ngIf="!loading && categories.length === 0">
        <div
          class="w-24 h-24 bg-gradient-to-r from-gray-300 to-gray-400 rounded-full flex items-center justify-center mx-auto mb-6">
          <i class="fas fa-tags text-white text-3xl"></i>
        </div>
        <h3 class="text-2xl font-bold text-gray-800 mb-2">No Categories Found</h3>
        <p class="text-gray-600 mb-6 max-w-md mx-auto">
          {{ searchTerm ? 'No categories match your search criteria.' : 'Get started by creating your first category.'
          }}
        </p>
        <button
          class="inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300"
          (click)="openCategoryForm()" *ngIf="!searchTerm">
          <i class="fas fa-plus mr-2"></i>
          Create First Category
        </button>
      </div>
    </div>

    <!-- Pagination Section -->
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6"
      *ngIf="!loading && totalPages > 1">
      <div class="flex flex-col sm:flex-row items-center justify-between gap-4">
        <div class="flex items-center space-x-2">
          <button
            class="px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
            [class.opacity-50]="currentPage === 1" (click)="onPageChange(currentPage - 1)"
            [disabled]="currentPage === 1">
            <i class="fas fa-chevron-left mr-1"></i>
            Previous
          </button>

          <div class="flex space-x-1">
            <button class="px-3 py-2 text-sm font-medium rounded-lg transition-all duration-300"
              [class.bg-blue-500]="page === currentPage" [class.text-white]="page === currentPage"
              [class.text-gray-600]="page !== currentPage" [class.hover:bg-gray-100]="page !== currentPage"
              *ngFor="let page of getPageNumbers()" (click)="onPageChange(page)">
              {{ page }}
            </button>
          </div>

          <button
            class="px-4 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
            [class.opacity-50]="currentPage === totalPages" (click)="onPageChange(currentPage + 1)"
            [disabled]="currentPage === totalPages">
            Next
            <i class="fas fa-chevron-right ml-1"></i>
          </button>
        </div>

        <div class="text-sm text-gray-600">
          Page {{ currentPage }} of {{ totalPages }}
        </div>
      </div>
    </div>
  </div>
</div>